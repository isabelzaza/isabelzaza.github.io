<!doctype html>

<html>
<head>
	<meta charset="utf-8">
	<title>Loading experiment...</title>
	<meta name="description" content="Experiment loader page.">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script>
		// test urls for each condition
		var test_urls = [
			"https://oplab.barrios.io/oplab/667dca2de871c33eedff1e1a/execute?mode=live&nextType=HIT&nextID=667dcf71e871c33eedff1e21&stimuliFolderID=667dcf33e871c33eedff1e20",
			"https://oplab.barrios.io/oplab/667dca2de871c33eedff1e1a/execute?mode=live&nextType=HIT&nextID=667dcf71e871c33eedff1e21&stimuliFolderID=667dcf33e871c33eedff1e20", 
                        "https://oplab.barrios.io/oplab/667dca2de871c33eedff1e1a/execute?mode=live&nextType=HIT&nextID=667dcf71e871c33eedff1e21&stimuliFolderID=667dcf33e871c33eedff1e20
"
		];
		// random assignment probabilities for each condition, sum of the probabilities should be 1
		var test_prob = [1/3, 1/3, 1/3];

		var r = Math.random();
		var p = test_prob.length - 1;
		while (r < test_prob.slice(0, p).reduce(function(t, c) { return t + c; }, 0)) {
			p -= 1;
		}
		var test_url = test_urls[p];
		if (window.location.search.length > 0) {
			test_url = test_url + (test_url.includes('?') ? '&' : '?') + window.location.search.substring(1);
		}
	</script>
</head>
<body>
	<p id="loading-message">Loading experiment...</p>

	<script>
		document.addEventListener("DOMContentLoaded", function(e) {
			location.href = test_url;
			setTimeout(function() {
				document.getElementById("loading-message").innerHTML = "<a href=\"" + test_url + "\">Click here</a> to start the experiment.";
			}, 2000);
		});
	</script>
</body>
</html>
